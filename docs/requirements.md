# MVP要件書: 予約管理サービス

## 1. 概要
### 1.1 プロジェクトの背景と目的
予約対応を電話・メールで行っている小規模事業者が、オンラインで予約を受け付けて業務負荷を軽減し、顧客満足度を向上させることを目的とする。

### 1.2 スコープと制約事項
MVPでは単一店舗・単一サービス・スタッフなしを想定し、予約の作成・変更・キャンセルと基本設定管理を対象とする。メール送信、オンライン決済、外部カレンダー連携、複数店舗管理などは範囲外とする。

### 1.3 用語定義
管理者: 店舗オーナー本人。顧客: Web経由で予約する一般ユーザー。予約枠: 営業時間内に設定された予約可能な時間帯。

## 2. ビジネス要件
### 2.1 ビジネス目標
管理者の手動対応を削減し、顧客が任意の時間に予約できるセルフサービス体験を提供する。運用開始から3か月以内にオンライン予約比率の過半数を達成する。

### 2.2 ステークホルダー一覧
| 役割 | 期待する価値 |
| --- | --- |
| 店舗オーナー | 予約状況の可視化・業務効率化 |
| 顧客 | 24時間利用可能な予約手段 |
| 開発チーム | Cloudflare Pagesでの安定運用 |

### 2.3 成功指標（KPI）
管理者が手動で対応する予約件数を50%減少させる。予約フォーム完了率を70%以上維持する。日次アクティブ顧客数10件以上を目標とする。

## 3. 機能要件
### 3.1 機能一覧と優先度
| ID | 機能 | 説明 | 優先度 |
| --- | --- | --- | --- |
| F-01 | 管理者認証 | メール＋パスワードでログイン | MUST |
| F-02 | 基本設定管理 | 営業日・営業時間・予約枠長を設定 | MUST |
| F-03 | 予約一覧閲覧 | 日時・顧客情報・ステータスを表示 | MUST |
| F-04 | 予約登録・編集・キャンセル | 管理者が予約を操作 | MUST |
| F-05 | 顧客予約フロー | 空き枠確認→情報入力→確認→完了 | MUST |
| F-06 | 予約通知メール | 新規・キャンセル時に管理者へ通知 | SHOULD |
| F-07 | 自己キャンセルリンク | 顧客が完了メールからキャンセル | SHOULD |

### 3.2 ユースケース
- UC-01: 店舗オーナーがログインして当日の予約状況を確認する。
- UC-02: 顧客が空き枠を検索し予約を確定する。
- UC-03: 店舗オーナーが顧客からの問い合わせに応じ予約内容を変更する。
- UC-04: 顧客が完了メールからキャンセルを行う。

### 3.3 ユーザーストーリー
- 店舗オーナーとして、当日の予約が一目で分かるダッシュボードが欲しい。
- 店舗オーナーとして、新しい予約が入ったら即時に通知メールを受け取りたい。
- 顧客として、数ステップで予約を完了し確認メールを受け取りたい。
- 顧客として、予定変更時に自分でキャンセルできる手段が欲しい。

## 4. 非機能要件
### 4.1 パフォーマンス要件
主要画面は初回表示3秒以内。予約送信APIは95パーセンタイルで1秒以内。

### 4.2 セキュリティ要件
HTTPS通信を必須化し、パスワードはハッシュ化保管。CSRF対策を実施。

### 4.3 可用性・信頼性要件
Cloudflare Pages上で運用時間帯99%以上の可用性を確保。エラーログはWranglerで確認可能とする。

### 4.4 対応OS・デバイス
最新のChrome・Safari・Edgeをサポートし、スマートフォンとPCでのレスポンシブ表示を保証。

## 5. 制約条件とリスク
### 5.1 技術的制約
フロントエンドはReact 18 と Vite 5、API層はHono 4 を使用。ホスティングはCloudflare Pages、Wrangler CLIでデプロイを管理。ESM構成のTypeScriptプロジェクトを前提とする。

### 5.2 リスク分析
通知メール機能が遅延すると顧客対応が遅れるリスクがある。設定誤りにより予約枠が正しく公開されないリスクがある。セキュリティ不備によって顧客データが漏えいするリスクがある。
